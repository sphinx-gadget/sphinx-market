function formatMYR(n){return n?('RM '+Number(n).toFixed(2)):'Harga: Sila hubungi';} function getCart(){return JSON.parse(localStorage.getItem('cart')||'[]');} function setCart(c){localStorage.setItem('cart',JSON.stringify(c));} function addToCart(item){const c=getCart();const ex=c.find(x=>x.id===item.id);if(ex)ex.qty+=item.qty||1;else c.push({...item,qty:item.qty||1});setCart(c);alert('Ditambah ke troli');updateCartCount();} function updateCartCount(){const c=getCart().reduce((s,i)=>s+i.qty,0);document.querySelectorAll('.cart-count').forEach(el=>el.textContent=c);} document.addEventListener('DOMContentLoaded',updateCartCount);